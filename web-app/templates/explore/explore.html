<!-- home page / explore page -->

{% extends "base.html" %}

{% block title %}Explore{% endblock %}

{% block content %}
<div class="explore-page">
    <!-- <h1 class="explore-title">Explore Events</h1> -->

    <form method="GET" action="{{ url_for('explore.explore') }}" class="search-form" id="search-form">
        <input type="text" name="q" class="search-input" placeholder="Search events..." value="{{ request.args.get('q', '') }}">
        <button type="submit" class="search-button" id="search-btn">
            <svg class="search-icon">
                <use href="../../static/images/icons.svg#icon-search"></use>
            </svg>
        </button>
    </form>
    
    

    <div class="event-grid">
        {% for event in events %}
            <a href="{{ url_for('explore.event_detail', event_id=event.id) }}" class="event-card">
                <img src="{{ event.image_url }}" alt="{{ event.title }}" class="event-img">
                <!-- <div class="event-info">
                    <h3>{{ event.title }}</h3>
                    <p>{{ event.date }}</p>
                    <p>{{ event.location }}</p>
                </div> -->
            </a>
        {% else %}
            <p class="no-events">No events found.</p>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const colors = ["#EEBEDC", "#F4DD81", "#BDCBE9", "#BAC693"]
    
        const searchInput = document.querySelector(".search-input")
        const searchButton = document.getElementById("search-btn")
        const searchForm = document.getElementById("search-form")
    
        const randomFocusColor = colors[Math.floor(Math.random() * colors.length)];
        const randomButtonColor = colors[Math.floor(Math.random() * colors.length)];
    
        searchButton.style.backgroundColor = randomButtonColor;
    
        searchInput.addEventListener("focus", () => {
            searchInput.style.borderColor = randomFocusColor
        });
        searchInput.addEventListener("blur", () => {
            searchInput.style.borderColor = "#888"
        });
    
        searchButton.addEventListener("mouseenter", () => {
            searchButton.style.transition = "background-color 0.3s ease";
            searchButton.style.backgroundColor = "#000"
        });
    
        searchButton.addEventListener("mouseleave", () => {
            searchButton.style.backgroundColor = randomButtonColor;
        });
    
        let searchOpen = false;
    
        searchButton.addEventListener("click", (e) => {
            if (!searchOpen) {
                e.preventDefault();
                searchInput.classList.add("show")
                searchInput.focus();
                searchOpen = true;
            } else {
                // input is open already
                if (searchInput.value.trim() === "") {
                    e.preventDefault();
                    searchInput.classList.remove("show");
                    searchInput.blur();
                    searchOpen = false;
                }
                // else: if there is text, allow normal submit
            }
        });
    });
</script>    
{% endblock %}
